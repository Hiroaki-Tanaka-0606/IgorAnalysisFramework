# IgorAnalysisFramework
Igor上で、生データからグラフまでの処理をフローチャート的に構築する。

## 構成
- カレントフォルダ直下に以下のフォルダを用意する。
  - **Diagrams** フローチャートを記述するWave(Text, 2D, 複数可)を格納する。
  - **Data** データを格納する。
  - **Constants** 数または文字列の定数を格納する。フローチャートの初期化時に**Data**フォルダ内に同名コピーが作成される。
  - **Configurations** 依存関係、フローチャートの見た目などの設定情報を格納する。
  - **TempData** 一時データを格納する。ユーティリティ関数を実行する際は引数をすべてここに格納する必要がある。

## フローチャート
フローチャートを記述するWaveでは、以下の順で部品の性質を並べる。
- 0行目: 部品の種類(Data, Function, Module, Socket, Panel)
- 1行目: 部品の型
- 2行目: 部品の名前(他のWaveを含めて、重複不可)
- 3行目以降: 部品のプロパティ(input, output)

### 部品の種類
#### Data(データ)
以下の型を持つ。プロパティはない。
- Variable: 数
- String: 文字列
- Wave1D, Wave2D, Wave3D: 1, 2, 3次元Wave(Double Precision)
- TextWave: 1次元Text Wave

#### Function(関数)
いくつかのデータを入力しいくつかのデータを出力する。
型が関数の種類に対応する。
3行目以降は、引数となるデータ名を必要な個数だけ順番に並べる。

#### Module(モジュール)
いくつかのデータを入力に持つ。
入力を受け付けるソケットを持ち、別のモジュールに入力を行うソケットを持つ場合もある。
ソケットが値を受け取ると処理が実行され1つの値を返す。
処理の過程で、別のモジュールに入力を行い返された値を用いる場合もある。
型がモジュールの種類に対応する。
3行目以降は、引数となるデータ名・ソケット名(入力を行うソケットのみ、入力を受け付けるソケットは除く)を必要な個数だけ順番に並べる。

#### Socket(ソケット)
2つのモジュールをつなげ、一方のモジュールからもう一方に値を渡し処理を行わせる。
引数として渡す値の種類によって以下の型に分類される。すべてのソケットで、返す値は数になる。
- Coordinate1D, Coordinate2D, Coordinate3D: 1, 2, 3次元座標(x, y, z)入力
- Index1D, Index2D, Index3D: 1, 2, 3次元インデックス(p, q, r)入力

#### Panel(パネル)
いくつかのデータを入力し、グラフなどを出力する。
VariableやStringの型をもつデータを入力欄に表示し、値を変化させることもできる。

### Igorファイル上での実体
#### Data
**Data**フォルダ内に存在する。Variable, StringはNVAR, SVARとして取得することになる。

#### Function
以下のProcedure Functionとして存在する。***FuncName***は各関数の型に対応する。
- **IAF_** ***FuncName*** **_Definition()**: 引数データの情報を文字列リストで返す。
  - \[0\]: 引数の数**n**
  - \[1-n\]: 引数が入力であれば"0"、出力であれば"1"
  - \[n+1-2n\]: 引数の型
